-- H2 2.2.224;
SET DB_CLOSE_DELAY -1;        
;             
CREATE USER IF NOT EXISTS "SA" SALT '13fceedfe53c0645' HASH '597c3cefee863b98fabdd255a156e0a523e3cf75641c93cdfb605eb0c15bc38f' ADMIN;         
CREATE MEMORY TABLE "PUBLIC"."USERS"(
    "USERNAME" VARCHAR_IGNORECASE(50) NOT NULL,
    "PASSWORD" VARCHAR_IGNORECASE(150) NOT NULL,
    "ENABLED" BOOLEAN NOT NULL
);  
ALTER TABLE "PUBLIC"."USERS" ADD CONSTRAINT "PUBLIC"."CONSTRAINT_4" PRIMARY KEY("USERNAME");  
-- 4 +/- SELECT COUNT(*) FROM PUBLIC.USERS;   
INSERT INTO "PUBLIC"."USERS" VALUES
('user', '{bcrypt}$2a$10$rwdYdhJR6lN0AKxOgAHtAeLkwO9qg1thF9NyQPSDeRAfSR3KG1j8y', TRUE),
('admin', '{bcrypt}$2a$10$rwdYdhJR6lN0AKxOgAHtAeLkwO9qg1thF9NyQPSDeRAfSR3KG1j8y', TRUE),
('orgadmin', '{bcrypt}$2a$10$rwdYdhJR6lN0AKxOgAHtAeLkwO9qg1thF9NyQPSDeRAfSR3KG1j8y', TRUE),
('adminorgadmin', '{bcrypt}$2a$10$rwdYdhJR6lN0AKxOgAHtAeLkwO9qg1thF9NyQPSDeRAfSR3KG1j8y', TRUE);         
CREATE MEMORY TABLE "PUBLIC"."AUTHORITIES"(
    "USERNAME" VARCHAR_IGNORECASE(50) NOT NULL,
    "AUTHORITY" VARCHAR_IGNORECASE(50) NOT NULL
);             
-- 8 +/- SELECT COUNT(*) FROM PUBLIC.AUTHORITIES;             
INSERT INTO "PUBLIC"."AUTHORITIES" VALUES
('user', 'ROLE_USER'),
('admin', 'ROLE_ADMIN'),
('admin', 'ROLE_USER'),
('orgadmin', 'ROLE_ORG_ADMIN'),
('orgadmin', 'ROLE_USER'),
('adminorgadmin', 'ROLE_ADMIN'),
('adminorgadmin', 'ROLE_ORG_ADMIN'),
('adminorgadmin', 'ROLE_USER');    
CREATE UNIQUE NULLS DISTINCT INDEX "PUBLIC"."IX_AUTH_USERNAME" ON "PUBLIC"."AUTHORITIES"("USERNAME" NULLS FIRST, "AUTHORITY" NULLS FIRST);    
ALTER TABLE "PUBLIC"."AUTHORITIES" ADD CONSTRAINT "PUBLIC"."FK_AUTHORITIES_USERS" FOREIGN KEY("USERNAME") REFERENCES "PUBLIC"."USERS"("USERNAME") NOCHECK;    
